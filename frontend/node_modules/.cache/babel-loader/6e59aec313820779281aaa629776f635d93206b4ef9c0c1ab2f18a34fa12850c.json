{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useParams,useNavigate}from'react-router-dom';import UserService from'../service/UserService';import\"./UpdateUser.css\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function UpdateUser(){const navigate=useNavigate();const{userId}=useParams();const[userData,setUserData]=useState({name:'',email:'',role:'',city:''});useEffect(()=>{fetchUserDataById(userId);// Pass the userId to fetchUserDataById\n},[userId]);//wheen ever there is a chane in userId, run this\nconst fetchUserDataById=async userId=>{try{const token=localStorage.getItem('token');const response=await UserService.getUserById(userId,token);// Pass userId to getUserById\nconst{name,email,role,city}=response.ourUsers;setUserData({name,email,role,city});}catch(error){console.error('Error fetching user data:',error);}};const handleInputChange=e=>{const{name,value}=e.target;setUserData(prevUserData=>({...prevUserData,[name]:value}));};const handleSubmit=async e=>{e.preventDefault();try{const confirmDelete=window.confirm('Are you sure you want to update this user?');if(confirmDelete){const token=localStorage.getItem('token');const res=await UserService.updateUser(userId,userData,token);console.log(res);// Redirect to profile page or display a success message\nnavigate(\"/admin/user-management\");}}catch(error){console.error('Error updating user profile:',error);alert(error);}};return/*#__PURE__*/_jsxs(\"div\",{className:\"auth-container-update\",children:[/*#__PURE__*/_jsx(\"center\",{children:/*#__PURE__*/_jsx(\"h2\",{children:\"Update User\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Name:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"name\",value:userData.name,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Email:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"email\",name:\"email\",value:userData.email,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Role:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"role\",value:userData.role,onChange:handleInputChange})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"City:\"}),/*#__PURE__*/_jsx(\"input\",{type:\"text\",name:\"city\",value:userData.city,onChange:handleInputChange})]}),\" \",/*#__PURE__*/_jsxs(\"center\",{children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",children:\"Update\"}),\" \"]})]})]});}export default UpdateUser;","map":{"version":3,"names":["React","useState","useEffect","useParams","useNavigate","UserService","jsx","_jsx","jsxs","_jsxs","UpdateUser","navigate","userId","userData","setUserData","name","email","role","city","fetchUserDataById","token","localStorage","getItem","response","getUserById","ourUsers","error","console","handleInputChange","e","value","target","prevUserData","handleSubmit","preventDefault","confirmDelete","window","confirm","res","updateUser","log","alert","className","children","onSubmit","type","onChange"],"sources":["D:/Full Stack Project/Aura project/Aura Harks/Aura Harks/frontend/src/components/userspage/UpdateUser.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { useParams, useNavigate } from 'react-router-dom';\nimport UserService from '../service/UserService';\nimport \"./UpdateUser.css\";\n\nfunction UpdateUser() {\n  const navigate = useNavigate();\n  const { userId } = useParams();\n\n\n  const [userData, setUserData] = useState({\n    name: '',\n    email: '',\n    role: '',\n    city: ''\n  });\n\n  useEffect(() => {\n    fetchUserDataById(userId); // Pass the userId to fetchUserDataById\n  }, [userId]); //wheen ever there is a chane in userId, run this\n\n  const fetchUserDataById = async (userId) => {\n    try {\n      const token = localStorage.getItem('token');\n      const response = await UserService.getUserById(userId, token); // Pass userId to getUserById\n      const { name, email, role, city } = response.ourUsers;\n      setUserData({ name, email, role, city });\n    } catch (error) {\n      console.error('Error fetching user data:', error);\n    }\n  };\n\n\n  const handleInputChange = (e) => {\n    const { name, value } = e.target;\n    setUserData((prevUserData) => ({\n      ...prevUserData,\n      [name]: value\n    }));\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    try {\n      const confirmDelete = window.confirm('Are you sure you want to update this user?');\n      if (confirmDelete) {\n        const token = localStorage.getItem('token');\n        const res = await UserService.updateUser(userId, userData, token);\n        console.log(res)\n        // Redirect to profile page or display a success message\n        navigate(\"/admin/user-management\")\n      }\n\n    } catch (error) {\n      console.error('Error updating user profile:', error);\n      alert(error)\n    }\n  };\n\n  return ( \n    <div className=\"auth-container-update\">\n      <center><h2>Update User</h2></center>\n      <form onSubmit={handleSubmit}>\n        <div className=\"form-group\">\n          <label>Name:</label>\n          <input type=\"text\" name=\"name\" value={userData.name} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>Email:</label>\n          <input type=\"email\" name=\"email\" value={userData.email} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>Role:</label>\n          <input type=\"text\" name=\"role\" value={userData.role} onChange={handleInputChange} />\n        </div>\n        <div className=\"form-group\">\n          <label>City:</label>\n          <input type=\"text\" name=\"city\" value={userData.city} onChange={handleInputChange} />\n        </div> <center>\n        <button type=\"submit\">Update</button> </center>\n      </form>\n    </div> \n  );\n}\n\nexport default UpdateUser;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}